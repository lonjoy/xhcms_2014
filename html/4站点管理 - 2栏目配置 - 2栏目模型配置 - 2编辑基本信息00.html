$belong[html/main.html]
<div id="tabs" class="mainRight">
	<h1>栏目模型配置</h1>
	<div class="station_menu">
		<a class="fm-button" href="#">返回列表</a>
	</div>
	<ul>
		<li><a href="#tabs-1">基本信息</a></li>
		<li><a href="#tabs-2">栏目模型</a></li>
		<li><a href="#tabs-3">内容模型</a></li>
	</ul>
	<div id="tabs-1">
		<form id="write_form" name="basicinfor" onsubmit="" method="">
			<div class="form_setup">
				<div class="item clearfix">
					<span class="lable">模型ID:</span>
					<div class="text">
						<input type="text" class="disabled ipt" name="userName" value="15" disabled="disabled"/>
					</div>
				</div>
				<div class="item clearfix">
					<div class="float">
						<span class="lable"><i>*</i>模型名称:</span>
						<div class="text">
							<input type="text" class="ipt" name="name"/>
						</div>
					</div>
					<div class="float">
						<span class="lable">模型路径:</span>
						<div class="text">
							<input type="text" class="ipt" name="name"/>
						</div>
					</div>
				</div>
				<div class="item clearfix">
					<div class="float">
						<span class="lable">栏目模板前缀:</span>
						<div class="text">
							<input type="text" class="ipt" name="name"/>
						</div>
					</div>
					<div class="float">
						<span class="lable">内容模板前缀:</span>
						<div class="text">
							<input type="text" class="ipt" name="name"/>
						</div>
					</div>
				</div>
				<div class="item clearfix">
					<div class="float">
						<span class="lable">栏目标题图:</span>
						<div class="text">
							<span class="fm-label-item">
								<label for="label-item1">宽</label>
								<input type="text" placeholder="" id="label-item1" style="width:80px;height:26px;padding:0px;">
							</span>
							<span class="fm-label-item" style="margin-left:50px;">
								<label for="label-item1">高</label>
								<input type="text" placeholder="" id="label-item1" style="width:80px;height:26px;padding:0px;">
							</span>
						</div>
					</div>
					<div class="float">
						<span class="lable">栏目内容图:</span>
						<div class="text">
							<span class="fm-label-item">
								<label for="label-item1">宽</label>
								<input type="text" placeholder="" id="label-item1" style="width:80px;height:26px;padding:0px;">
							</span>
							<span class="fm-label-item" style="margin-left:50px;">
								<label for="label-item1">高</label>
								<input type="text" placeholder="" id="label-item1" style="width:80px;height:26px;padding:0px;">
							</span>
						</div>
					</div>
				</div>
				<div class="item clearfix">
					<span class="lable">是否有内容:</span>
					<div class="text">
						<input type="checkbox" name="switch" id="switch" class="switch">
					</div>
				</div>
			</div>
			<div class="info-btn">
				<input type="button" class="fm-button" value="提交">
				<input type="button" class="fm-button" value="取消">
			</div>
		</form>
	</div>
	<div id="tabs-2">
		<form id="change_password" name="changePassword" onsubmit="" method="">
			<div class="form_setup">
				<div class="station_menu">
					<input type="checkbox" name="checkbox" class="checkbox" id="all" value="0"> <label for="all">全选</label>
					<a class="fm-button btn-add round" href="#">添加分站</a>
					<a class="fm-button btn-edit round" href="#">编辑</a>
					<a class="fm-button btn-delete round" href="#">删除</a>
					<a class="list-move"><span class="list-move-up">上移</span> <span class="list-move-down">下移</span></a>
					<a class="fm-button btn-top round" href="#">置顶</a>
				</div>
				<table class="station_table addStyle" id="list-sites" style="border:#ccc 1px solid;padding:20px;">
					
				</table>
				<div class="addField">增加字段</div>
			</div>
			<div class="info-btn">
				<input type="button" class="fm-button" value="提交">
				<input type="button" class="fm-button" value="取消">
			</div>
		</form>
	</div>
	<div id="tabs-3">
		<form id="alter_portrait">
			<div class="form_setup">
				<div class="item clearfix">
					<span class="lable">头像:</span>
					<div class="text">
						<input type="hidden" id="zoomWidth1" value="162" size="5" /> <input
							type="hidden" id="zoomHeight1" value="162" size="5" /> <input
							type="hidden" id="uploadImgPath1" name="uploadImgPath1" /> <input
							type="hidden" id="middlePath1" name="middlePath1" /> <input
							id="originalPath1" class="upload-sma" name="smallImage" />
					</div>
					<div class="Upload_bt">
						<input type="button" class="fm-button" value="浏览" onclick="selectFile(1)" />
					</div>
				</div>
				<div class="head_img">
					<img class="img1" src="../images/img.png" />
					<img class="img2" src="../images/img.png"/>
					<img class="img3" src="../images/img.png"/>
				</div>
				<div class="info_submit">
					<input type="button" class="fm-button" value="提交">
				</div>
			</div>
		</form>
	</div>
</div>

<script type="template/html" id="md-list-sites">
	<tr>
		<th width="8%">字段</th>
		<th>名称</th>
		<th>数据类型</th>
		<th>默认值</th>
		<th>宽度</th>
		<th>独占一行</th>
		<th>显示</th>
		<th>帮助信息</th>
		<th>帮助位置</th>
		<th>可选项</th>
		<th>行数</th>
		<th>列数</th>
	</tr>
	{{#each tabColumn}}
	<tr>
		<td><input type="checkbox" name="checkbox" class="checkbox" id="cb-{{field}}" value="{{field}}"> <label for="cb-{{field}}">{{field}}</label></td>
		<td class="addbor"><a href="#">{{name}}</a></td>
		<td>
			<div class="item clearfix addcor">
				<select name="sel" id="select0" class="select">
					<option value="1">{{data-type}}</option>
				</select>
			</div>
		</td>
		<td class="addbor1"><a href="#"></a></td>
		<td class="addbor1"><a href="#"></a></td>
		<td><input type="checkbox" name="switch" id="switch" class="switch"></td>
		<td><input type="checkbox" name="switch" id="switch" class="switch"></td>
		<td>
			<div class="item clearfix addcor">
				<select name="sel" id="select0" class="select">
					<option value="1"></option>
					<option value="1">123</option>
				</select>
			</div>
		</td>
		<td class="addbor1"><a href="#"></a></td>
		<td class="addbor1"><a href="#"></a></td>
		<td class="addbor2"><a href="#"></a></td>
		<td class="addbor2"><a href="#"></a></td>
	</tr>
	{{/each}}
		
</script>
<script>
(function($){
	require(["form-style","alerts","draggable","template"],function(){
		var template = Handlebars.compile($("#md-list-sites").html()); //创建模板编译器

		var refreshList = function(){
			$.ajax({
				url : "json/site-config.json",
				dataType : "json",
				success: function(data){
					$("#list-sites").html( template(data) );
					$("#list-sites").find(".checkbox").toCheckbox();
					$("#list-sites").find(".switch").toSwitch();
					$(".select").toSelect({
						//width: 200,
					}).on('change',function(){
						//jAlert( this.value, "你选择的值为：" );
						$(".select-result").html( "你选择的值为："+this.value );
					}).trigger("change");
				} 
			});
		};
		refreshList();
		$(".checkbox").toCheckbox();

		/*全选*/
		$(".station_menu").find(".checkbox").on("click",function(){
			var _this = $(this);
			$("#list-sites").find(".checkbox").each(function(){
				if( $(this).is(":checked") !== _this.is(":checked") ){
					$(this).trigger('click')
				}
			});
		});


		
		/*menu删除*/
		$(".station_menu").find(".btn-delete").on("click",function(){
			var deLists=$(".station_table").find(".checkbox");
			var len=deLists.length;
			if(len!==0){
				var arr=[];
				for(i=0; i<len; i++){
					if(deLists[i].checked){
						arr.push($(".station_table").find(".checkbox")[i].value)			
					}
				}
				if(arr[0]){
					jConfirm('<h2 class="title"></h2> <p class="delete_content">是否删除该条信息</p> ',"",{
						okButton : "是",
						cancelButton : "否"
					},function(result){
						if(result ){
							$.ajax({
								url : "json/site-config.json",
								data:arr,
								dataType : "json",
								success: function(data){
									refreshList();
								}
							})
						}
					});	
				};
				if(arr[0]&&arr[1]){
					$(".delete_content").html("是否删除多条信息");
				};
				if(!arr[0])	{
					jAlert('<h2 class="title"></h2> <p class="delete_content">请选择删除项</p>');
				}
			}
		});


		/*menu编辑*/
		$(".station_menu").find(".btn-edit").on("click",function(){
			var deLists=$(".station_table").find(".checkbox");
			var len=deLists.length;
			if(len!==0){
				var arr=[];
				for(i=0; i<len; i++){
					if(deLists[i].checked){
						arr.push($(".station_table").find(".checkbox")[i].value)			
					}
				};
				var sub=arr.join();
				if(arr[0]&&!arr[1]){
					$.ajax({
						url : "json/site-config.json",
						data:sub,
						dataType : "json",
						success: function(data){
							refreshList();
						}
					})

				};
				if(!arr[0]){
					jAlert('<h2 class="title"></h2> <p class="delete_content">请选择一项</p>');
				}
				if(arr[1]){
					jAlert('<h2 class="title"></h2> <p class="delete_content">只能选择一项</p>');
				}
			}
		});

		/*table  delete*/
		$(".station_table").on("click",".delete",function(){
			var newIndex=$(".station_table").find(".delete").index(this);
			var ID=$(".station_table").find(".delete").eq(newIndex).attr("data-id");
			$.ajax({
				url:"json/site-config.json",
				data:ID,
				success:function(){
					refreshList();
				}
			});
		});
	});
})(jQuery);

</script>
<script>
(function(){
	require(["form-style","alerts","tabs","requestAFrame"],function(){
		$(".switch").toSwitch();
		

		$("#tabs").tabs();
		var originalPath1 = "";
		$.addTimeout("listen-val", function(){
			if ($("#originalPath1").val() != originalPath1) {
				$(".head_img").find('img').attr("src", "http://tpic.home.news.cn/xhCloudNewsPic/"+$("#originalPath1").val());
				originalPath1 = $("#originalPath1").val();
			}
		});
	});
})();
</script>

<script>
function selectFile(n) {
	var width = document.getElementById('zoomWidth' + n).value;
	var height = document.getElementById('zoomHeight' + n).value;
	window.open('../xhadmin/common/open.do?width=' + width+ "&height=" + height + "&type=" + n, '_blank','height=800,width=1000,top=0,left=0,toolbar=no,scrollbars=no,resizable=no');
}
</script>